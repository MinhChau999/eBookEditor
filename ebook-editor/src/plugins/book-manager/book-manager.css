/*!
 * grapesjs-book-manager styles - Following GrapesJS theme from setup.css
 */

.book-info-section {
  width: 100%;
  color: var(--gjs-font-color);
  font-size: var(--gjs-font-size);
  font-family: var(--gjs-main-font);
}

/* Form groups - using GrapesJS gjs-sm-field and gjs-sm-composite structure */
.book-info-section .gjs-sm-properties .gjs-sm-field.gjs-sm-composite {
  flex: 1 1 auto;
  min-width: calc(50% - 10px); /* Two columns layout */
}

/* Make form fields full width within their containers */
.book-info-section .gjs-sm-properties .gjs-sm-field {
  width: 100%;
}

/* Labels - using GrapesJS gjs-sm-label class */
.book-info-section .gjs-sm-label {
  display: block;
  margin-bottom: 4px;
  font-size: var(--gjs-font-size);
  color: var(--gjs-font-color);
  font-weight: 500;
  font-family: var(--gjs-main-font);
  text-align: left;
  line-height: 1.4;
}

/* Required field indicator */
.book-info-section .gjs-sm-label[style*="Title *"],
.book-info-section .gjs-sm-label[style*="Author *"] {
  position: relative;
}

.book-info-section .gjs-sm-label:has-text("Title *"),
.book-info-section .gjs-sm-label:has-text("Author *") {
  position: relative;
}

/* Alternative approach for required fields */
.book-info-section .gjs-sm-composite:nth-child(1) .gjs-sm-label,
.book-info-section .gjs-sm-composite:nth-child(3) .gjs-sm-label {
  position: relative;
}

.book-info-section .gjs-sm-composite:nth-child(1) .gjs-sm-label::after,
.book-info-section .gjs-sm-composite:nth-child(3) .gjs-sm-label::after {
  content: ' *';
  color: var(--gjs-tertiary-color);
  font-weight: 600;
}

/* Fields - using GrapesJS gjs-sm-field styles */
.book-info-section .gjs-sm-field {
  background-color: var(--gjs-main-dark-color);
  border: 1px solid var(--gjs-main-light-color);
  border-radius: 2px;
  box-sizing: border-box;
  padding: 0;
  position: relative;
}

.book-info-section .gjs-sm-field input,
.book-info-section .gjs-sm-field select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  color: var(--gjs-font-color);
  border: none;
  background-color: var(--gjs-main-color);
  box-sizing: border-box;
  width: 100%;
  position: relative;
  padding: var(--gjs-input-padding);
  z-index: 1;
  font-family: var(--gjs-main-font);
  font-size: var(--gjs-font-size);
  transition: all var(--gjs-animation-duration) ease;
}

.book-info-section .gjs-sm-field select {
  padding-right: calc(var(--gjs-input-padding) * 1.5);
}

.book-info-section .gjs-sm-field select option {
  background-color: var(--gjs-main-color);
  color: var(--gjs-font-color);
}

.book-info-section .gjs-sm-field input:focus,
.book-info-section .gjs-sm-field select:focus {
  outline: none;
  box-shadow: 0 0 0 1px var(--gjs-tertiary-color);
}

.book-info-section .gjs-sm-field input:hover,
.book-info-section .gjs-sm-field select:hover {
  background-color: var(--gjs-secondary-dark-color);
}


/* Buttons - follow GrapesJS button patterns from setup.css */
.book-info-section .gjs-btn-import {
  /* Match gjs-btn-prim from setup.css */
  color: var(--gjs-font-color-active);
  background-color: var(--gjs-tertiary-color);
  border: 1px solid var(--gjs-main-dark-color);
  border-radius: 2px;
  padding: var(--gjs-input-padding) calc(var(--gjs-input-padding) * 1.5);
  cursor: pointer;
  font-family: var(--gjs-main-font);
  font-size: var(--gjs-font-size);
  font-weight: 500;
  transition: all var(--gjs-animation-duration) ease;
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
}

.book-info-section .gjs-btn-import:hover {
  background-color: var(--gjs-main-light-color);
  color: var(--gjs-font-color);
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.book-info-section .gjs-btn-import:active {
  transform: translateY(1px);
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.book-info-section .gjs-sm-btn {
  /* Match gjs-sm-btn from setup.css */
  background-color: var(--gjs-main-light-color);
  border-radius: 2px;
  box-shadow: 1px 1px 0 var(--gjs-main-light-color);
  padding: var(--gjs-input-padding);
  cursor: pointer;
  border: 1px solid var(--gjs-main-dark-color);
  color: var(--gjs-font-color);
  transition: all var(--gjs-animation-duration) ease;
  font-family: var(--gjs-main-font);
  font-size: var(--gjs-font-size);
  opacity: 0.85;
  min-width: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.book-info-section .gjs-sm-btn:hover {
  background-color: var(--gjs-main-dark-color);
  opacity: 1;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

/* Form actions container - buttons are already inside gjs-sm-composite */
.book-info-section .gjs-sm-composite:last-child .gjs-sm-field {
  display: flex;
  gap: 8px;
  padding: var(--gjs-input-padding);
}

/* Icon spacing for buttons */
.book-info-section .gjs-btn-import i,
.book-info-section .gjs-sm-btn i {
  margin-right: 6px;
}

.book-info-section .gjs-sm-btn i {
  margin-right: 0;
}

/* Validation states using GrapesJS color scheme */
.book-info-section .gjs-sm-field.error input,
.book-info-section .gjs-sm-field.error select {
  border-color: #dc3545;
  background-color: #2d1b1b;
  box-shadow: inset 0 1px 2px rgba(220, 53, 69, 0.2);
}

.book-info-section .gjs-sm-field.success input,
.book-info-section .gjs-sm-field.success select {
  border-color: #28a745;
  background-color: #1b2d1b;
  box-shadow: inset 0 1px 2px rgba(40, 167, 69, 0.2);
}

.book-info-section .error-message {
  color: #dc3545;
  font-size: calc(var(--gjs-font-size) * 0.8);
  margin-top: 2px;
  padding: 0 var(--gjs-input-padding);
  font-family: var(--gjs-main-font);
}

/* Success feedback animation */
@keyframes save-success {
  0% {
    transform: scale(1);
    background-color: var(--gjs-tertiary-color);
  }
  50% {
    transform: scale(1.02);
    background-color: #28a745;
  }
  100% {
    transform: scale(1);
    background-color: var(--gjs-tertiary-color);
  }
}

.book-info-section .gjs-btn-import.saved {
  animation: save-success 0.6s ease;
  color: var(--gjs-font-color-active);
}

/* Loading state with GrapesJS-style animation */
.book-info-section .gjs-field.loading input {
  background-image: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 3px,
    var(--gjs-main-light-color) 3px,
    var(--gjs-main-light-color) 6px
  );
  background-size: 12px 12px;
  animation: loading-stripes 1s linear infinite;
}

@keyframes loading-stripes {
  0% { background-position: 0 0; }
  100% { background-position: 12px 12px; }
}

/* Field focus enhancement */
.book-info-section .gjs-field:focus-within {
  border-color: var(--gjs-tertiary-color);
  box-shadow: 0 0 0 1px var(--gjs-tertiary-color);
}

/* Disabled state */
.book-info-section .gjs-field input:disabled,
.book-info-section .gjs-field select:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background-color: var(--gjs-secondary-dark-color);
}

/* Responsive design for smaller screens */
@media (max-width: 768px) {
  .book-info-section .gjs-sm-properties .gjs-sm-field.gjs-sm-composite {
    margin-bottom: calc(var(--gjs-input-padding) * 0.8);
    min-width: 100%; /* Single column on mobile */
    flex: 1 1 100%;
  }

  .book-info-section .gjs-sm-field input,
  .book-info-section .gjs-sm-field select {
    padding: calc(var(--gjs-input-padding) * 1.2);
    font-size: 16px; /* Prevent zoom on iOS */
  }

  .book-info-section .gjs-btn-import,
  .book-info-section .gjs-sm-btn {
    padding: calc(var(--gjs-input-padding) * 1.2);
  }
}

/* Improved contrast for accessibility */
@media (prefers-contrast: high) {
  .book-info-section .gjs-sm-field input,
  .book-info-section .gjs-sm-field select {
    border-width: 2px;
  }

  .book-info-section .gjs-btn-import {
    border-width: 2px;
  }
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
  .book-info-section .gjs-sm-field input::placeholder,
  .book-info-section .gjs-sm-field select::placeholder {
    color: var(--gjs-secondary-light-color);
    opacity: 0.7;
  }
}

/* Book info specific enhancements */
.book-info-section .left-sidebar-title {
  background: linear-gradient(to bottom, var(--gjs-secondary-dark-color), var(--gjs-main-color));
  border-bottom: 1px solid var(--gjs-main-dark-color);
}

.book-info-section .left-sidebar-title i {
  margin-right: 8px;
}

.book-info-section .gjs-category-content {
  background: var(--gjs-main-color);
  border-top: none;
}

/* Modal content styling */
.book-manager-modal-content {
  padding: 20px;
  min-width: 400px;
}

/* Better form spacing */
.book-info-section .gjs-sm-properties .gjs-sm-field.gjs-sm-composite:first-child {
  margin-top: var(--gjs-input-padding);
}

.book-info-section .gjs-sm-properties .gjs-sm-field.gjs-sm-composite:last-child {
  margin-bottom: var(--gjs-input-padding);
}